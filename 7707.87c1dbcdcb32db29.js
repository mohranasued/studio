"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7707],{7707:(b,p,r)=>{r.r(p),r.d(p,{AgendamentoPageModule:()=>T});var m=r(6895),A=r(4719),i=r(7181),g=r(506),y=r(5861),D=r(3466),f=r(2993),o=r(6738),h=r(2875);let v=(()=>{class n{constructor(e){this._firestore=e}buscaHorariosDisponiveis(e){const t=(0,h.JU)(this._firestore,`agendamento/${e}`);return(0,h._1)(t)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(h.gg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Z(n,s){if(1&n){const e=o.EpF();o.TgZ(0,"ion-item")(1,"ion-button",6),o.NdJ("click",function(){const c=o.CHM(e).$implicit,a=o.oxw();return o.KtG(a.reservarData(c.hora))}),o._uU(2),o.qZA()()}if(2&n){const e=s.$implicit;o.xp6(1),o.Q6J("disabled",!e.disponivel)("color",e.disponivel?"success":"danger"),o.xp6(1),o.Oqu(e.hora)}}const P=[{path:"",component:(()=>{class n{constructor(e,t,l,c){this.router=e,this._service=t,this.alertController=l,this.activatedRoute=c,this.horariosDisponives=[],this.diaDocRef="",this.nome="",this.preco=0,this.isWeekday=a=>{const u=new Date(a).getUTCDay();return 0!==u&&1!==u}}ngOnInit(){this.activatedRoute.queryParams.subscribe(e=>{e&&(this.nome=e.nome,this.preco=e.preco,console.log(this.nome),console.log(this.preco))})}buscaHorariosDisponiveis(e){this.diaDocRef=(0,D.Z)((0,f.Z)(e.detail.value),"dd-MM-yyyy");const t=this._service.buscaHorariosDisponiveis(this.diaDocRef),l=(0,f.Z)(e.detail.value).getUTCDay();console.log(l);const c=0==l?Array.from({length:9},(a,d)=>d+7).map(a=>({hora:`${a}:00`,disponivel:!0})):Array.from({length:11},(a,d)=>d+7).map(a=>({hora:`${a}:00`,disponivel:!0}));t.subscribe(a=>{a?(this.horariosDisponives=c,a.horarios.forEach(d=>{this.horariosDisponives.find(u=>u.hora==d).disponivel=!1})):this.horariosDisponives=c})}reservarData(e){var t=this;return(0,y.Z)(function*(){const l={queryParams:{nome:t.nome,preco:t.preco,data:t.diaDocRef,hora:e}};yield(yield t.alertController.create({header:"Confirma\xe7\xe3o",message:`Confirma o agendamento no dia ${t.diaDocRef} \xe0s ${e} ?`,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{t.alertController.dismiss()}},{text:"Ok",role:"confirm",handler:()=>{t.router.navigate(["enviar-angendamento"],l)}}]})).present()})()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(g.F0),o.Y36(v),o.Y36(i.Br),o.Y36(g.gz))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-agendamento"]],decls:27,vars:9,consts:[["slot","start"],["fullscreen","",1,"ion-padding"],[1,"ion-padding"],["locale","pt-BR",3,"isDateEnabled","ionChange"],["lines","none"],[4,"ngFor","ngForOf"],["expand","block",3,"disabled","color","click"]],template:function(e,t){1&e&&(o.TgZ(0,"ion-header")(1,"ion-toolbar"),o._UZ(2,"ion-back-button",0),o.TgZ(3,"ion-title"),o._uU(4,"Agendar Hor\xe1rio"),o.qZA()()(),o.TgZ(5,"ion-content",1)(6,"ion-item")(7,"ion-row")(8,"ion-col")(9,"ion-label")(10,"strong"),o._uU(11," Servi\xe7o: "),o.qZA()()(),o.TgZ(12,"ion-col"),o._uU(13),o.qZA()()(),o.TgZ(14,"ion-item")(15,"ion-row")(16,"ion-col")(17,"ion-label")(18,"strong"),o._uU(19," Valor: "),o.qZA()()(),o.TgZ(20,"ion-col"),o._uU(21),o.ALo(22,"currency"),o.qZA()()(),o.TgZ(23,"ion-item",2)(24,"ion-datetime",3),o.NdJ("ionChange",function(c){return t.buscaHorariosDisponiveis(c)}),o.qZA()(),o.TgZ(25,"ion-list",4),o.YNc(26,Z,3,3,"ion-item",5),o.qZA()()),2&e&&(o.xp6(13),o.hij(" ",t.nome," "),o.xp6(8),o.hij(" ",o.gM2(22,4,t.preco,"BRL",!0,"1.2")," "),o.xp6(3),o.Q6J("isDateEnabled",t.isWeekday),o.xp6(2),o.Q6J("ngForOf",t.horariosDisponives))},dependencies:[m.sg,i.oU,i.YG,i.wI,i.W2,i.x4,i.Gu,i.Ie,i.Q$,i.q_,i.Nd,i.sr,i.wd,i.QI,i.cs,m.H9],styles:["ion-button[_ngcontent-%COMP%]{width:100%}"]}),n})()}];let C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[g.Bz.forChild(P),g.Bz]}),n})(),T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[v],imports:[m.ez,A.u5,i.Pc,C]}),n})()}}]);