{"version":3,"file":"src_app_agendamento_agendamento_module_ts.js","mappings":"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","sources":["./src/app/agendamento/agendamento-routing.module.ts","./src/app/agendamento/agendamento.module.ts","./src/app/agendamento/agendamento.page.ts","./src/app/agendamento/services/horarios.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AgendamentoPage } from './agendamento.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AgendamentoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AgendamentoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AgendamentoPageRoutingModule } from './agendamento-routing.module';\n\nimport { AgendamentoPage } from './agendamento.page';\nimport { HorarioService } from './services/horarios.service';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AgendamentoPageRoutingModule\n  ],\n  providers: [HorarioService],\n  declarations: [AgendamentoPage,]\n})\nexport class AgendamentoPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { AlertController } from '@ionic/angular';\nimport { format, parseISO } from 'date-fns';\nimport { HorariosDisponiveisFirebaseModel } from './model/horarios-disponiveis-firebase.model';\nimport { HorasDeTrabalho } from './model/horarios-disponiveis.model';\nimport { HorarioService } from './services/horarios.service';\n\n@Component({\n  selector: 'app-agendamento',\n  templateUrl: './agendamento.page.html',\n  styleUrls: ['./agendamento.page.scss'],\n})\nexport class AgendamentoPage implements OnInit {\n  public horariosDisponives: HorasDeTrabalho[] = [];\n  public diaDocRef: string = '';\n  public nome: string = '';\n  public preco: number = 0;\n  constructor(\n    private router: Router,\n    private _service: HorarioService,\n    private alertController: AlertController,\n    private activatedRoute: ActivatedRoute\n  ) { }\n\n  ngOnInit() {\n    this.activatedRoute.queryParams.subscribe(params => {\n      if(params){\n        this.nome = params.nome;\n        this.preco = params.preco;\n      }\n    });\n  }\n\n  buscaHorariosDisponiveis($event: any) {\n    this.diaDocRef = format(parseISO($event.detail.value), 'dd-MM-yyyy');\n    const docData = this._service.buscaHorariosDisponiveis(this.diaDocRef);\n    const dataParaIdentificarRangeHoras = parseISO($event.detail.value).getUTCDay();\n    console.log(dataParaIdentificarRangeHoras);\n    const horasDisponiveisPadrao = dataParaIdentificarRangeHoras == 0 ? Array.from({length: 9}, (_, i) => i + 7).map((x) => { return {hora: `${x}:00`, disponivel: true}}) : Array.from({length: 11}, (_, i) => i + 7).map((x) => { return {hora: `${x}:00`, disponivel: true}});\n\n    docData.subscribe((response: HorariosDisponiveisFirebaseModel) => {\n      if(response) {\n        this.horariosDisponives = horasDisponiveisPadrao;\n        response.horarios.forEach(hora => {\n          this.horariosDisponives.find(x => x.hora == hora).disponivel = false;\n        });\n      } else {\n        this.horariosDisponives = horasDisponiveisPadrao;\n      }\n    })\n  }\n\n  async reservarData(hora: string) {\n    const navigationExtras: NavigationExtras = {\n      queryParams: {\n          nome: this.nome,\n          preco: this.preco,\n          data: this.diaDocRef,\n          hora: hora\n      }\n    };\n\n    const alerta = await this.alertController.create({\n      header: 'Confirmação',\n      message: `Confirma o agendamento no dia ${this.diaDocRef} às ${hora} ?`,\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            this.alertController.dismiss();\n          }\n        },\n        {\n          text: 'Ok',\n          role: 'confirm',\n          handler: () => {\n            this.router.navigate(['enviar-angendamento'], navigationExtras);\n          }\n        },    \n      ]\n    });\n\n    await alerta.present();\n  }\n\n  isWeekday = (dateString: string) => {\n    const date = new Date(dateString);\n    const utcDay = date.getUTCDay();\n    const x = new Date(2022, 6, 14, 21);\n    const y = new Date(2022, 6, 15, 21);\n\n    // console.log('data-calendario ==========')\n    // console.log(date);\n    // console.log('data-calendario ==========')\n\n    // console.log('data-configurado ==========')\n    // console.log(x);\n    // console.log(y);\n    // console.log('data-configurado ==========')\n\n    /**\n     * Date will be enabled if it is not\n     * Sunday or Saturday\n     */\n    return (utcDay !== 0 && utcDay !== 1 && date.valueOf() != x.valueOf() && date.valueOf() != y.valueOf());\n  }\n}\n","import { Injectable } from \"@angular/core\";\r\nimport { doc, docData, Firestore } from '@angular/fire/firestore';\r\nimport { Observable } from \"rxjs\";\r\nimport { HorariosDisponiveisFirebaseModel } from \"../model/horarios-disponiveis-firebase.model\";\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class HorarioService {\r\n    constructor(\r\n        public _firestore: Firestore\r\n    ) { }\r\n\r\n    buscaHorariosDisponiveis(dia: string): Observable<HorariosDisponiveisFirebaseModel>  {\r\n        const agendaDocRef = doc(this._firestore, `agendamento/${dia}`);        \r\n        return docData(agendaDocRef) as Observable<HorariosDisponiveisFirebaseModel>;        \r\n    }\r\n}"],"names":["Component","ActivatedRoute","Router","AlertController","format","parseISO","HorarioService","AgendamentoPage","constructor","router","_service","alertController","activatedRoute","dateString","date","Date","utcDay","getUTCDay","x","y","valueOf","ngOnInit","queryParams","subscribe","params","nome","preco","buscaHorariosDisponiveis","$event","diaDocRef","detail","value","docData","dataParaIdentificarRangeHoras","console","log","horasDisponiveisPadrao","Array","from","length","_","i","map","hora","disponivel","response","horariosDisponives","horarios","forEach","find","reservarData","navigationExtras","data","alerta","create","header","message","buttons","text","role","handler","dismiss","navigate","present","selector","template"],"sourceRoot":"webpack:///"}